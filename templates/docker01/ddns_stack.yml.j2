---

services:
  cloudflare-ddns:
    image: timothyjmiller/cloudflare-ddns:latest
    container_name: cloudflare-ddns
    security_opt:
      - no-new-privileges:true
    network_mode: 'host'
    environment:
      - PUID=1000
      - PGID=1000
    volumes:
      - {{ docker_container_config_folder }}/ddns/config.json:/config.json
    restart: always

  restarter:
    image: docker:cli
    volumes:
      - "/var/run/docker.sock:/var/run/docker.sock"
    command: ["/bin/sh", "-c", "while true; do sleep 86400; docker restart cloudflare-ddns; done"]
    restart: unless-stopped